<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
        http://www.springframework.org/schema/jdbc  http://www.springframework.org/schema/jdbc/spring-jdbc-4.0.xsd">

    <!-- 환경설정 기본정보를 globals.properties 에서 참조하도록 propertyConfigurer 설정  -->
    <beans profile="local,dev,prod">
        <bean id="propertyConfigurer"
              class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="locations">
                <list>
                    <value>classpath:/egovframework/egovProps/globals.properties</value>
                    <!--<value>classpath:/#{systemProperties['spring.profiles.active']}.properties</value>-->
                </list>
            </property>
        </bean>
    </beans>

    <beans profile="local,dev,prod">
        <bean id="dataSourceSpied" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${Globals.DriverClassName}"/>
            <property name="url" value="${Globals.Url}"/>
            <property name="username" value="${Globals.UserName}"/>
            <property name="password" value="${Globals.Password}"/>
            <property name="validationQuery" value="${Globals.ValidationQuery}"/>
        </bean>

        <bean id="dataSource" class="net.sf.log4jdbc.Log4jdbcProxyDataSource">
            <constructor-arg ref="dataSourceSpied"/>
            <property name="logFormatter">
                <bean class="net.sf.log4jdbc.tools.Log4JdbcCustomFormatter">
                    <property name="loggingType" value="MULTI_LINE"/>
                    <property name="sqlPrefix" value="#### SQL ####&#xD;&#xA;        "/> <!-- &#xD;&#xA;(유니코드) == \r\n  -->
                </bean>
            </property>
        </bean>

        <bean id="dataSourceTiberoSpied" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${Globals.Tibero.DriverClassName}"/>
            <property name="url" value="${Globals.Tibero.Url}" />
            <property name="username" value="${Globals.Tibero.UserName}"/>
            <property name="password" value="${Globals.Tibero.Password}"/>
            <property name="validationQuery" value="${Globals.Tibero.ValidationQuery}"/>
        </bean>

        <bean id="dataSourceTibero" class="net.sf.log4jdbc.Log4jdbcProxyDataSource">
            <constructor-arg ref="dataSourceTiberoSpied" />
            <property name="logFormatter">
                <bean class="net.sf.log4jdbc.tools.Log4JdbcCustomFormatter">
                    <property name="loggingType" value="MULTI_LINE" />
                    <property name="sqlPrefix" value="#### SQL ####&#xD;&#xA;        " />
                </bean>
            </property>
        </bean>
    </beans>
</beans>
